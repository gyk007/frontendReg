webpackJsonp([5],{124:function(t,e,s){"use strict";var n=s(4),o=s(126),r=s(5),a=s.n(r);e.a={name:"index",store:o.a,components:{QLayout:n.p,QToolbar:n.w,QToolbarTitle:n.x,QBtn:n.a,QIcon:n.j,QList:n.q,QListHeader:n.r,QItem:n.l,QItemSide:n.n,QItemMain:n.m},data:function(){return{sortType:"month"}},computed:{news:function(){return this.$store.getters.news},session:function(){return this.$store.getters.session}},methods:{sortNews:function(t){this.$store.dispatch("newsList",t),this.$data.sortType=t,this.$refs.layout.hideLeft()},replay:function(){this.$store.dispatch("newsList",this.$data.sortType)},exit:function(){a.a.remove("token"),this.$refs.layout.hideLeft(),window.FirebasePlugin&&(window.FirebasePlugin.unsubscribe("all"),this.session.users_tag.forEach(function(t){window.FirebasePlugin.unsubscribe(t.name)})),this.$store.dispatch("newsList",this.$data.sortType)}}}},126:function(t,e,s){"use strict";var n=s(1),o=s(137),r=s(138),a=s(127),i=s(5),u=s.n(i),c=s(0),l=s.n(c),j=s(3);s.n(j);n.a.use(o.a),n.a.use(r.a);var d=new o.a.Store({state:{newsList:void 0,news:void 0,error:void 0,authError:void 0,session:void 0},getters:{newsList:function(t){return t.newsList},news:function(t){return t.news},error:function(t){return t.error},authError:function(t){return t.authError},session:function(t){return t.session}},mutations:{set:function(t,e){var s=e.type,n=e.items;t[s]=n},addItemToArry:function(t,e){var s=e.type,n=e.item;t[s].push(n)},deleteItemFromArry:function(t,e){var s=e.type,n=e.key,o=e.value,r=t[s].findIndex(function(t){return t[n]==o});t[s].splice(r,1)}},actions:{addDeleteFavorte:function(t,e){var s=(t.state,t.commit),o={params:{token:u.a.get("token"),action:"add_delete_favorite",id_news:e.id},headers:{"Content-Type":"text/plain"}};n.a.http.post(a.a.url.news,null,o).then(function(t){var e=t.body;e.ERROR&&(console.log(e.ERROR),s("set",{type:"authError",items:e.ERROR}),e.ERROR.AUTH&&(document.location.hash="/auth"))},function(t){console.log(t)})},addFirebaseToken:function(t){var e=t.state,s=t.commit;window.FirebasePlugin&&window.FirebasePlugin.onTokenRefresh(function(t){window.FirebasePlugin.subscribe("all");var o={params:{action:"add_firebase_token",token:u.a.get("token"),firebase_token:t},headers:{"Content-Type":"text/plain"}};n.a.http.post(a.a.url.manager,null,o).then(function(t){var n=t.body;n.ERROR?(console.log(n.ERROR),s("set",{type:"error",items:n.ERROR}),n.ERROR.AUTH&&(document.location.hash="/auth")):(s("set",{type:"session",items:n.SESSION}),e.session.users_tag.forEach(function(t){window.FirebasePlugin.subscribe(t.name)}))},function(t){console.log(t)})},function(t){console.log(t)})},auth:function(t,e){var s=(t.state,t.commit),o=t.dispatch,r={params:{password:e.password,login:e.login},headers:{"Content-Type":"text/plain"}};n.a.http.post(a.a.url.news,null,r).then(function(t){var e=t.body;e.ERROR?(console.log(e.ERROR),s("set",{type:"authError",items:e.ERROR}),e.ERROR.AUTH&&(document.location.hash="/auth")):(u.a.set("token",e.SESSION.token),o("addFirebaseToken"),document.location.hash="/news/")},function(t){console.log(t)})},newsList:function(t,e){var s=(t.state,t.commit),o=t.dispatch;s("set",{type:"newsList",items:void 0});var r={params:{action:"list",token:u.a.get("token"),sort:e||"month"},headers:{"Content-Type":"text/plain"}};n.a.http.get(a.a.url.news,r).then(function(t){var e=t.body;e.ERROR?(console.log(e.ERROR),s("set",{type:"error",items:e.ERROR}),e.ERROR.AUTH&&(document.location.hash="/auth")):(e.news_list.forEach(function(t){t.ctime&&(t.ctime=l()(t.ctime))}),s("set",{type:"newsList",items:e.news_list}),o("addFirebaseToken"),document.location.hash="/news")},function(t){console.log(t)})}}});e.a=d},127:function(t,e,s){"use strict";var n={url:{news:"http://admin.grd77.shop/mob/news/",manager:"http://admin.grd77.shop/mob/manager/",img:"http://admin.grd77.shop/files/news/"}};e.a=n},128:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=s(1),o=s(4),r=s(134),a=s(144);s.n(a);s(129),n.a.config.productionTip=!1,n.a.use(o.z),s(142),o.z.start(function(){new n.a({el:"#q-app",router:r.a,render:function(t){return t(s(146).default)},beforeCreate:function(){window.FirebasePlugin&&window.FirebasePlugin.getToken(function(t){console.log(t)},function(t){console.error(t)})}})})},129:function(t,e){},134:function(t,e,s){"use strict";function n(t){return function(){return s(136)("./"+t+".vue")}}var o=s(1),r=s(135);o.a.use(r.a),e.a=new r.a({mode:"hash",scrollBehavior:function(){return{y:0}},routes:[{path:"/",redirect:"/news"},{path:"/auth",component:n("PageAuth")},{path:"/news",component:n("PageMain")},{path:"/news/:id",component:n("PageNews")},{path:"*",component:n("Error404")}]})},136:function(t,e,s){function n(t){var e=o[t];return e?s.e(e[1]).then(function(){return s(e[0])}):Promise.reject(new Error("Cannot find module '"+t+"'."))}var o={"./Error404.vue":[151,3],"./PageAuth.vue":[152,2],"./PageMain.vue":[153,1],"./PageNews.vue":[154,0]};n.keys=function(){return Object.keys(o)},n.id=136,t.exports=n},139:function(t,e){},141:function(t,e,s){function n(t){return s(o(t))}function o(t){var e=r[t];if(!(e+1))throw new Error("Cannot find module '"+t+"'.");return e}var r={"./af":6,"./af.js":6,"./ar":7,"./ar-dz":8,"./ar-dz.js":8,"./ar-kw":9,"./ar-kw.js":9,"./ar-ly":10,"./ar-ly.js":10,"./ar-ma":11,"./ar-ma.js":11,"./ar-sa":12,"./ar-sa.js":12,"./ar-tn":13,"./ar-tn.js":13,"./ar.js":7,"./az":14,"./az.js":14,"./be":15,"./be.js":15,"./bg":16,"./bg.js":16,"./bm":17,"./bm.js":17,"./bn":18,"./bn.js":18,"./bo":19,"./bo.js":19,"./br":20,"./br.js":20,"./bs":21,"./bs.js":21,"./ca":22,"./ca.js":22,"./cs":23,"./cs.js":23,"./cv":24,"./cv.js":24,"./cy":25,"./cy.js":25,"./da":26,"./da.js":26,"./de":27,"./de-at":28,"./de-at.js":28,"./de-ch":29,"./de-ch.js":29,"./de.js":27,"./dv":30,"./dv.js":30,"./el":31,"./el.js":31,"./en-au":32,"./en-au.js":32,"./en-ca":33,"./en-ca.js":33,"./en-gb":34,"./en-gb.js":34,"./en-ie":35,"./en-ie.js":35,"./en-nz":36,"./en-nz.js":36,"./eo":37,"./eo.js":37,"./es":38,"./es-do":39,"./es-do.js":39,"./es-us":40,"./es-us.js":40,"./es.js":38,"./et":41,"./et.js":41,"./eu":42,"./eu.js":42,"./fa":43,"./fa.js":43,"./fi":44,"./fi.js":44,"./fo":45,"./fo.js":45,"./fr":46,"./fr-ca":47,"./fr-ca.js":47,"./fr-ch":48,"./fr-ch.js":48,"./fr.js":46,"./fy":49,"./fy.js":49,"./gd":50,"./gd.js":50,"./gl":51,"./gl.js":51,"./gom-latn":52,"./gom-latn.js":52,"./gu":53,"./gu.js":53,"./he":54,"./he.js":54,"./hi":55,"./hi.js":55,"./hr":56,"./hr.js":56,"./hu":57,"./hu.js":57,"./hy-am":58,"./hy-am.js":58,"./id":59,"./id.js":59,"./is":60,"./is.js":60,"./it":61,"./it.js":61,"./ja":62,"./ja.js":62,"./jv":63,"./jv.js":63,"./ka":64,"./ka.js":64,"./kk":65,"./kk.js":65,"./km":66,"./km.js":66,"./kn":67,"./kn.js":67,"./ko":68,"./ko.js":68,"./ky":69,"./ky.js":69,"./lb":70,"./lb.js":70,"./lo":71,"./lo.js":71,"./lt":72,"./lt.js":72,"./lv":73,"./lv.js":73,"./me":74,"./me.js":74,"./mi":75,"./mi.js":75,"./mk":76,"./mk.js":76,"./ml":77,"./ml.js":77,"./mr":78,"./mr.js":78,"./ms":79,"./ms-my":80,"./ms-my.js":80,"./ms.js":79,"./mt":81,"./mt.js":81,"./my":82,"./my.js":82,"./nb":83,"./nb.js":83,"./ne":84,"./ne.js":84,"./nl":85,"./nl-be":86,"./nl-be.js":86,"./nl.js":85,"./nn":87,"./nn.js":87,"./pa-in":88,"./pa-in.js":88,"./pl":89,"./pl.js":89,"./pt":90,"./pt-br":91,"./pt-br.js":91,"./pt.js":90,"./ro":92,"./ro.js":92,"./ru":3,"./ru.js":3,"./sd":93,"./sd.js":93,"./se":94,"./se.js":94,"./si":95,"./si.js":95,"./sk":96,"./sk.js":96,"./sl":97,"./sl.js":97,"./sq":98,"./sq.js":98,"./sr":99,"./sr-cyrl":100,"./sr-cyrl.js":100,"./sr.js":99,"./ss":101,"./ss.js":101,"./sv":102,"./sv.js":102,"./sw":103,"./sw.js":103,"./ta":104,"./ta.js":104,"./te":105,"./te.js":105,"./tet":106,"./tet.js":106,"./th":107,"./th.js":107,"./tl-ph":108,"./tl-ph.js":108,"./tlh":109,"./tlh.js":109,"./tr":110,"./tr.js":110,"./tzl":111,"./tzl.js":111,"./tzm":112,"./tzm-latn":113,"./tzm-latn.js":113,"./tzm.js":112,"./uk":114,"./uk.js":114,"./ur":115,"./ur.js":115,"./uz":116,"./uz-latn":117,"./uz-latn.js":117,"./uz.js":116,"./vi":118,"./vi.js":118,"./x-pseudo":119,"./x-pseudo.js":119,"./yo":120,"./yo.js":120,"./zh-cn":121,"./zh-cn.js":121,"./zh-hk":122,"./zh-hk.js":122,"./zh-tw":123,"./zh-tw.js":123};n.keys=function(){return Object.keys(r)},n.resolve=o,t.exports=n,n.id=141},143:function(t,e){},145:function(t,e){},146:function(t,e,s){"use strict";function n(t){s(147)}Object.defineProperty(e,"__esModule",{value:!0});var o=s(124),r=s(148),a=s(125),i=n,u=a(o.a,r.a,!1,i,null,null);e.default=u.exports},147:function(t,e){},148:function(t,e,s){"use strict";var n=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("q-layout",{ref:"layout",attrs:{view:"lHh Lpr fff","left-class":{"bg-grey-2":!0}}},[s("q-toolbar",{staticClass:"glossy",attrs:{slot:"header"},slot:"header"},[s("q-btn",{attrs:{flat:""},on:{click:function(e){t.$refs.layout.toggleLeft()}}},[s("q-icon",{attrs:{name:"menu"}})],1),t._v(" "),s("q-toolbar-title",[t._v("\n\t\t\tВымпел\n\t\t\t"),s("div",{attrs:{slot:"subtitle"},slot:"subtitle"})]),t._v(" "),t.news?t._e():s("q-btn",{attrs:{flat:""},on:{click:t.replay}},[s("q-icon",{attrs:{name:"replay"}})],1)],1),t._v(" "),s("div",{attrs:{slot:"left"},slot:"left"},[s("q-list",{attrs:{"no-border":"",link:"","inset-delimiter":""}},[s("q-list-header",[t._v("Новости")]),t._v(" "),s("q-item",{on:{click:function(e){t.sortNews("week")}}},[s("q-item-side",{attrs:{icon:"sort"}}),t._v(" "),s("q-item-main",{attrs:{label:"За неделю"}})],1),t._v(" "),s("q-item",{on:{click:function(e){t.sortNews("month")}}},[s("q-item-side",{attrs:{icon:"sort"}}),t._v(" "),s("q-item-main",{attrs:{label:"За месяц"}})],1),t._v(" "),s("q-item",{on:{click:function(e){t.sortNews("year")}}},[s("q-item-side",{attrs:{icon:"sort"}}),t._v(" "),s("q-item-main",{attrs:{label:"За год"}})],1),t._v(" "),s("q-item",{on:{click:function(e){t.sortNews("favorite")}}},[s("q-item-side",{attrs:{icon:"star"}}),t._v(" "),s("q-item-main",{attrs:{label:"Избранное"}})],1),t._v(" "),s("q-item",{on:{click:t.exit}},[s("q-item-side",{attrs:{icon:"exit to app"}}),t._v(" "),s("q-item-main",{attrs:{label:"Выход"}})],1)],1)],1),t._v(" "),s("div",[s("router-view")],1)],1)},o=[],r={render:n,staticRenderFns:o};e.a=r}},[128]);